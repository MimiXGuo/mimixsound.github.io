<!DOCTYPE html>
<html>
<head>
  <title>Homework3 for location</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
  integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
  crossorigin=""/>
  
</head>
<body>
  
  <nav>
    <input type="checkbox" id="check">
    <label for="check" class="checkbtn">
      <i class="material-icons">dehaze</i>
    </label>
    <label class="heading">ABC Toys</label>

    <ul>

        <li><a  href="../index.html">Home</a></li>
        <li><a  href="contact.html">Contact</a></li>
        <li><a  href="products.html">Products</a></li>
        <li><a class="active" href="pages/location.html">Location</a></li>
        <li><a  href="extra.html">Extra</a></li>
    </ul>

  </nav>
  
  <div class="body-text"><h3>OUR LOCATION</h3> </div>
<section>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
  integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
  crossorigin="">

</script>

<script>
  //  var map = L.map('map');
  //  map.setView([51.505, -0.09], 13);

  //  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
  //  maxZoom: 19,
  ////  attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
//}).addTo(map);

var map = L.map('map').setView([37.7749, -122.4194], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
  maxZoom: 18,
}).addTo(map);

var circle = L.circle([51.508, -0.11], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: 500
}).addTo(map);


navigator.geolocation.watchPosition(success, error);

//let marker,circle;

function success(pos){

    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;
    const accuracy = pos.coords.accuracy;

    //if(marker){
      //map.removelayer(marker);
      //map.removelayer(circle);
    //}

    
    let marker = L.marker([lat, lng]).addTo(map);
    let circle = L.circle([lat, lng],{ radius: accuracy }).addTo(map);

   // if (!zoomed){
   //   zoomed = map.fitbounds(circle.getbounds());
   // }
    map.fitBounds(circle.getBounds())

}
  //map.setview([lat, lng]);
function onMapClick(e) {
    alert("You clicked the map at " + e.latlng);
}

   map.on('click', onMapClick);
function error(err){

    if (err.code === 1) {
        alert("Please allow geolocation access");
    }
    else{
        alert("Connot get current location");
    }
}
</script>
</section>

</body>


<footer>By the way, parents love our toys too</footer>

</html>